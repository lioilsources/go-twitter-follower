<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twitter Follower Tracker</title>
    <link rel="stylesheet" href="src/style.css">
</head>
<body>
    <div id="app">
        <header>
            <h1>Following Tracker</h1>
            <div id="account-selector">
                <select id="account-select" onchange="switchAccount(this.value)">
                    <option value="">No accounts</option>
                </select>
                <button id="manage-accounts-btn" onclick="toggleAccountManager()" title="Manage accounts">+</button>
            </div>
            <div id="stats">
                <span id="total-count">-</span> following
                <span class="separator">|</span>
                <span id="last-fetch">-</span>
                <span class="separator">|</span>
                <button id="fetch-btn" onclick="fetchNow()">Fetch Now</button>
            </div>
        </header>

        <nav class="tabs">
            <button class="tab active" onclick="switchTab('following')">Following</button>
            <button class="tab" onclick="switchTab('lists')">Lists</button>
        </nav>

        <!-- Following Tab -->
        <div id="tab-following" class="tab-content active">
            <div class="controls">
                <input type="text" id="search" placeholder="Search by username, name, or description..." oninput="filterTable()">
                <select id="sort-by" onchange="sortTable()">
                    <option value="followers_count">Followers</option>
                    <option value="following_count">Following</option>
                    <option value="tweet_count">Tweets</option>
                    <option value="username">Username</option>
                    <option value="name">Name</option>
                </select>
                <select id="sort-dir" onchange="sortTable()">
                    <option value="desc">Descending</option>
                    <option value="asc">Ascending</option>
                </select>
            </div>

            <div id="table-container">
                <table id="following-table">
                    <thead>
                        <tr>
                            <th class="col-avatar"></th>
                            <th class="col-user">User</th>
                            <th class="col-desc">Description</th>
                            <th class="col-num" onclick="sortBy('followers_count')">Followers</th>
                            <th class="col-num" onclick="sortBy('following_count')">Following</th>
                            <th class="col-num" onclick="sortBy('tweet_count')">Tweets</th>
                            <th class="col-loc">Location</th>
                        </tr>
                    </thead>
                    <tbody id="table-body">
                        <tr><td colspan="7" class="loading">Loading...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Lists Tab -->
        <div id="tab-lists" class="tab-content">
            <div id="lists-grid-view">
                <div id="lists-grid" class="lists-grid">
                    <div class="loading">Loading lists...</div>
                </div>
            </div>
            <div id="list-members-view" style="display: none;">
                <div class="list-members-header">
                    <button class="back-btn" onclick="backToLists()">&larr; Back to Lists</button>
                    <span id="list-members-title"></span>
                </div>
                <div class="controls">
                    <input type="text" id="list-members-search" placeholder="Search members..." oninput="filterListMembers()">
                </div>
                <div id="list-members-table-container">
                    <table id="list-members-table">
                        <thead>
                            <tr>
                                <th class="col-avatar"></th>
                                <th class="col-user">User</th>
                                <th class="col-desc">Description</th>
                                <th class="col-num">Followers</th>
                                <th class="col-num">Following</th>
                                <th class="col-num">Tweets</th>
                                <th class="col-loc">Location</th>
                                <th class="col-lists">Lists</th>
                            </tr>
                        </thead>
                        <tbody id="list-members-body">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Account Manager Modal -->
    <div id="account-modal" class="modal">
        <div class="modal-content">
            <h2>Manage Accounts</h2>
            <div id="account-list"></div>
            <div class="add-account-form">
                <input type="text" id="new-username" placeholder="Twitter username (without @)">
                <input type="password" id="new-bearer" placeholder="Bearer token">
                <button id="add-account-btn" onclick="addAccount()">Add Account</button>
            </div>
            <button class="modal-close" onclick="toggleAccountManager()">Close</button>
        </div>
    </div>

    <script src="src/main.js"></script>
</body>
</html>
